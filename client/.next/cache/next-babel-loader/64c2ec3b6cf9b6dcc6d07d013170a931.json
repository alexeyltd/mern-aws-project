{"ast":null,"code":"var _jsxFileName = \"/Users/a.pavlenko/Documents/work-projects/react-aws-project/client/pages/auth/activate/[id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { withRouter } from \"next/router\";\nimport { useState, useEffect } from \"react\";\nimport jwt from \"jsonwebtoken\";\nimport axios from \"axios\";\nimport { showSuccessMessage, showErrorMessage } from \"../../../components/alerts.component\";\nimport { API } from \"../../../config\";\nimport Layout from \"../../../components/layout.component\";\n\nconst ActivateAccount = ({\n  router\n}) => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    name: \"\",\n    token: \"\",\n    buttonText: \"Activate account\",\n    success: \"\",\n    error: \"\"\n  });\n  const {\n    name,\n    token,\n    buttonText,\n    success,\n    error\n  } = state;\n  useEffect(() => {\n    let token = router.query.id;\n\n    if (token) {\n      const {\n        name\n      } = jwt.decode(token);\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        name,\n        token\n      }));\n    }\n  }, [router]);\n\n  const clickSubmit = async e => {\n    e.preventDefault();\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      buttonText: \"Activating\"\n    }));\n\n    try {\n      const response = await axios.post(`${API}/register/activate`, {\n        token\n      });\n      console.log(response);\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        name: \"\",\n        token: \"\",\n        buttonText: \"Activated\",\n        success: response.data.message\n      }));\n    } catch (error) {\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        buttonText: \"Activated acount\",\n        error: error.data.error\n      }));\n    }\n  };\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6 offset-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, \"G'dat \", name, \", Ready to activate\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }), success && showSuccessMessage(success), error && showErrorMessage(error), __jsx(\"button\", {\n    className: \"btn btn-outline-warning btn-block\",\n    onClick: clickSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, buttonText))));\n};\n\nexport default withRouter(ActivateAccount);","map":{"version":3,"sources":["/Users/a.pavlenko/Documents/work-projects/react-aws-project/client/pages/auth/activate/[id].js"],"names":["withRouter","useState","useEffect","jwt","axios","showSuccessMessage","showErrorMessage","API","Layout","ActivateAccount","router","state","setState","name","token","buttonText","success","error","query","id","decode","clickSubmit","e","preventDefault","response","post","console","log","data","message"],"mappings":"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","sourcesContent":["import { withRouter } from \"next/router\";\nimport { useState, useEffect } from \"react\";\nimport jwt from \"jsonwebtoken\";\nimport axios from \"axios\";\nimport {\n  showSuccessMessage,\n  showErrorMessage,\n} from \"../../../components/alerts.component\";\nimport { API } from \"../../../config\";\nimport Layout from \"../../../components/layout.component\";\n\nconst ActivateAccount = ({ router }) => {\n  const [state, setState] = useState({\n    name: \"\",\n    token: \"\",\n    buttonText: \"Activate account\",\n    success: \"\",\n    error: \"\",\n  });\n\n  const { name, token, buttonText, success, error } = state;\n\n  useEffect(() => {\n    let token = router.query.id;\n    if (token) {\n      const { name } = jwt.decode(token);\n      setState({\n        ...state,\n        name,\n        token,\n      });\n    }\n  }, [router]);\n\n  const clickSubmit = async (e) => {\n    e.preventDefault();\n    setState({\n      ...state,\n      buttonText: \"Activating\",\n    });\n    try {\n      const response = await axios.post(`${API}/register/activate`, {\n        token,\n      });\n      console.log(response);\n      setState({\n        ...state,\n        name: \"\",\n        token: \"\",\n        buttonText: \"Activated\",\n        success: response.data.message,\n      });\n    } catch (error) {\n      setState({\n        ...state,\n        buttonText: \"Activated acount\",\n        error: error.data.error,\n      });\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          <h1>G'dat {name}, Ready to activate</h1>\n          <br />\n          {success && showSuccessMessage(success)}\n          {error && showErrorMessage(error)}\n          <button\n            className=\"btn btn-outline-warning btn-block\"\n            onClick={clickSubmit}\n          >\n            {buttonText}\n          </button>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default withRouter(ActivateAccount);\n"]},"metadata":{},"sourceType":"module"}