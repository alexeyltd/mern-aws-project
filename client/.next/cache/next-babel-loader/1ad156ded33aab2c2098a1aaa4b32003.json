{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/a.pavlenko/Documents/work-projects/react-aws-project/client/pages/register.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Layout from \"../components/layout.component\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { showSuccessMessage, showErrorMessage } from \"../utils/alerts\";\nimport { API } from \"../config\";\nimport { isAuthenticate } from \"../utils/auth\";\n\nvar Register = function Register() {\n  _s();\n\n  var _useState = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    error: \"\",\n    success: \"\",\n    buttonText: \"Register\"\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  useEffect(function () {\n    isAuthenticate() && Router.push(\"/\");\n  }, []);\n  var name = state.name,\n      email = state.email,\n      password = state.password,\n      error = state.error,\n      success = state.success,\n      buttonText = state.buttonText;\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      setState(_objectSpread(_objectSpread({}, state), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, e.target.value), _defineProperty(_objectSpread2, \"error\", \"\"), _defineProperty(_objectSpread2, \"success\", \"\"), _defineProperty(_objectSpread2, \"buttonText\", \"Register\"), _objectSpread2)));\n    };\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault(); // console.table({ name, email, password });\n\n              setState(_objectSpread(_objectSpread({}, state), {}, {\n                buttonText: \"Registering\"\n              }));\n              _context.prev = 2;\n              _context.next = 5;\n              return axios.post(\"\".concat(API, \"/register\"), {\n                name: name,\n                email: email,\n                password: password\n              });\n\n            case 5:\n              response = _context.sent;\n              console.log(response);\n              setState(_objectSpread(_objectSpread({}, state), {}, {\n                name: \"\",\n                email: \"\",\n                password: \"\",\n                buttonText: \"Submitted\",\n                success: response.data.message\n              }));\n              _context.next = 14;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0);\n              setState(_objectSpread(_objectSpread({}, state), {}, {\n                buttonText: \"Register\",\n                error: _context.t0.data.message\n              }));\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var registerForm = function registerForm() {\n    return __jsx(\"form\", {\n      onSubmit: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }\n    }, __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, __jsx(\"input\", {\n      value: name,\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Type your name\",\n      onChange: handleChange(\"name\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, __jsx(\"input\", {\n      value: email,\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Type your email\",\n      onChange: handleChange(\"email\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, __jsx(\"input\", {\n      valu: password,\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"Type your password\",\n      onChange: handleChange(\"password\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, __jsx(\"button\", {\n      className: \"btn btn-outline-warning\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, state.buttonText)));\n  };\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md6 offset-md-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Register\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }), success && showSuccessMessage(success), error && showErrorMessage(error), registerForm()));\n};\n\n_s(Register, \"3wALx7fk4HCnsUk8lCD9Wp3HrxA=\");\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/a.pavlenko/Documents/work-projects/react-aws-project/client/pages/register.js"],"names":["Layout","useState","useEffect","axios","showSuccessMessage","showErrorMessage","API","isAuthenticate","Register","name","email","password","error","success","buttonText","state","setState","Router","push","handleChange","e","target","value","handleSubmit","preventDefault","post","response","console","log","data","message","registerForm"],"mappings":"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","sourcesContent":["import Layout from \"../components/layout.component\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { showSuccessMessage, showErrorMessage } from \"../utils/alerts\";\nimport { API } from \"../config\";\nimport { isAuthenticate } from \"../utils/auth\";\n\nconst Register = () => {\n  const [state, setState] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    error: \"\",\n    success: \"\",\n    buttonText: \"Register\",\n  });\n\n  useEffect(() => {\n    isAuthenticate() && Router.push(\"/\");\n  }, []);\n\n  const { name, email, password, error, success, buttonText } = state;\n\n  const handleChange = (name) => (e) => {\n    setState({\n      ...state,\n      [name]: e.target.value,\n      error: \"\",\n      success: \"\",\n      buttonText: \"Register\",\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // console.table({ name, email, password });\n    setState({\n      ...state,\n      buttonText: \"Registering\",\n    });\n    try {\n      const response = await axios.post(`${API}/register`, {\n        name,\n        email,\n        password,\n      });\n      console.log(response);\n      setState({\n        ...state,\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        buttonText: \"Submitted\",\n        success: response.data.message,\n      });\n    } catch (error) {\n      console.log(error);\n      setState({\n        ...state,\n        buttonText: \"Register\",\n        error: error.data.message,\n      });\n    }\n  };\n\n  const registerForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <input\n          value={name}\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Type your name\"\n          onChange={handleChange(\"name\")}\n        />\n      </div>\n      <div className=\"form-group\">\n        <input\n          value={email}\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Type your email\"\n          onChange={handleChange(\"email\")}\n        />\n      </div>\n      <div className=\"form-group\">\n        <input\n          valu={password}\n          type=\"password\"\n          className=\"form-control\"\n          placeholder=\"Type your password\"\n          onChange={handleChange(\"password\")}\n        />\n      </div>\n      <div className=\"form-group\">\n        <button className=\"btn btn-outline-warning\">{state.buttonText}</button>\n      </div>\n    </form>\n  );\n\n  return (\n    <Layout>\n      <div className=\"col-md6 offset-md-3\">\n        <h1>Register</h1>\n        <br />\n        {success && showSuccessMessage(success)}\n        {error && showErrorMessage(error)}\n        {registerForm()}\n      </div>\n    </Layout>\n  );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}